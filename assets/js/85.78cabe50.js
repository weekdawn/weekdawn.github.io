(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{696:function(e,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"构建三维场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建三维场景"}},[e._v("#")]),e._v(" 构建三维场景")]),e._v(" "),a("p",[e._v("three.js程序结构")]),e._v(" "),a("p",[e._v("场景 - 相机 - 渲染器")]),e._v(" "),a("blockquote",[a("ul",[a("li",[e._v("场景 Scene\n"),a("ul",[a("li",[e._v("网络模型 Mesh\n"),a("ul",[a("li",[e._v("几何体 Geometry\n"),a("ul",[a("li",[e._v("形状")]),e._v(" "),a("li",[e._v("尺寸")])])]),e._v(" "),a("li",[e._v("材质 Material\n"),a("ul",[a("li",[e._v("颜色")]),e._v(" "),a("li",[e._v("贴图")]),e._v(" "),a("li",[e._v("透明度")])])])])]),e._v(" "),a("li",[e._v("光照 Light\n"),a("ul",[a("li",[e._v("颜色")]),e._v(" "),a("li",[e._v("分类\n"),a("ul",[a("li",[e._v("环境光")]),e._v(" "),a("li",[e._v("点光源")]),e._v(" "),a("li",[e._v("平行光")])])])])])])]),e._v(" "),a("li",[e._v("相机 Camera\n"),a("ul",[a("li",[e._v("位置")]),e._v(" "),a("li",[e._v("视线方向")]),e._v(" "),a("li",[e._v("投影方式\n"),a("ul",[a("li",[e._v("投射投影 PerspectiveCamera")]),e._v(" "),a("li",[e._v("正射投影 OrthographicCamera")])])])])]),e._v(" "),a("li",[e._v("渲染器 Renderer\n"),a("ul",[a("li",[e._v("渲染器创建 - WebGLRenderer()")]),e._v(" "),a("li",[e._v("开始渲染  - .render(scene, camera)")]),e._v(" "),a("li",[e._v("domElement属性 - canvas对象")])])])])]),e._v(" "),a("p",[e._v("场景\nTHREE.Scene()")]),e._v(" "),a("p",[e._v("相机\nTHREE.OrthographicCamera()")]),e._v(" "),a("p",[e._v("渲染器\nTHREE.WebGLRenderer()")]),e._v(" "),a("p",[a("img",{attrs:{src:"http://www.webgl3d.cn/upload/threejs9render.png",alt:"render.png"}})]),e._v(" "),a("p",[e._v("动画旋转")]),e._v(" "),a("p",[e._v("mesh.rotateY(0.01);//每次绕y轴旋转0.01弧度")]),e._v(" "),a("p",[e._v("鼠标操作三维场景")]),e._v(" "),a("ul",[a("li",[e._v("缩放：滚动—鼠标中键")]),e._v(" "),a("li",[e._v("旋转：拖动—鼠标左键")]),e._v(" "),a("li",[e._v("平移：拖动—鼠标右键")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象\ncontrols.addEventListener('change', render);//监听鼠标、键盘事件\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h2",{attrs:{id:"_3d场景中插入新的几何体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3d场景中插入新的几何体"}},[e._v("#")]),e._v(" 3D场景中插入新的几何体")]),e._v(" "),a("p",[e._v("几何体代码：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//长方体 参数：长，宽，高\nvar geometry = new THREE.BoxGeometry(100, 100, 100);\n// 球体 参数：半径60  经纬度细分数40,40\nvar geometry = new THREE.SphereGeometry(60, 40, 40);\n// 圆柱  参数：圆柱面顶部、底部直径50,50   高度100  圆周分段数\nvar geometry = new THREE.CylinderGeometry( 50, 50, 100, 25 );\n// 正八面体\nvar geometry = new THREE.OctahedronGeometry(50);\n// 正十二面体\nvar geometry = new THREE.DodecahedronGeometry(50);\n// 正二十面体\nvar geometry = new THREE.IcosahedronGeometry(50);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("同时绘制多个：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 立方体网格模型\nvar geometry1 = new THREE.BoxGeometry(100, 100, 100);\nvar material1 = new THREE.MeshLambertMaterial({\n  color: 0x0000ff\n}); //材质对象Material\nvar mesh1 = new THREE.Mesh(geometry1, material1); //网格模型对象Mesh\nscene.add(mesh1); //网格模型添加到场景中\n\n// 球体网格模型\nvar geometry2 = new THREE.SphereGeometry(60, 40, 40);\nvar material2 = new THREE.MeshLambertMaterial({\n  color: 0xff00ff\n});\nvar mesh2 = new THREE.Mesh(geometry2, material2); //网格模型对象Mesh\nmesh2.translateY(120); //球体网格模型沿Y轴正方向平移120\nscene.add(mesh2);\n\n// 圆柱网格模型\nvar geometry3 = new THREE.CylinderGeometry(50, 50, 100, 25);\nvar material3 = new THREE.MeshLambertMaterial({\n  color: 0xffff00\n});\nvar mesh3 = new THREE.Mesh(geometry3, material3); //网格模型对象Mesh\n// mesh3.translateX(120); //球体网格模型沿Y轴正方向平移120\nmesh3.position.set(120,0,0);//设置mesh3模型对象的xyz坐标为120,0,0\nscene.add(mesh3); \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br")])]),a("h2",{attrs:{id:"设置材质效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置材质效果"}},[e._v("#")]),e._v(" 设置材质效果")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var sphereMaterial=new THREE.MeshLambertMaterial({\n    color:0xff0000,\n    opacity:0.7,\n    transparent:true\n});//材质对象\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"材质常见属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#材质常见属性"}},[e._v("#")]),e._v(" 材质常见属性")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("材质属性")]),e._v(" "),a("th",[e._v("简介")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("color")]),e._v(" "),a("td",[e._v("材质颜色，比如蓝色0x0000ff")])]),e._v(" "),a("tr",[a("td",[e._v("wireframe")]),e._v(" "),a("td",[e._v("将几何图形渲染为线框。 默认值为false")])]),e._v(" "),a("tr",[a("td",[e._v("opacity")]),e._v(" "),a("td",[e._v("透明度设置，0表示完全透明，1表示完全不透明")])]),e._v(" "),a("tr",[a("td",[e._v("transparent")]),e._v(" "),a("td",[e._v("是否开启透明，默认false")])])])]),e._v(" "),a("h2",{attrs:{id:"threejs加载外部模型文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#threejs加载外部模型文件"}},[e._v("#")]),e._v(" Threejs加载外部模型文件")]),e._v(" "),a("p",[e._v("由3dmx、blender、substence、Solidworks等软件创建好的三维模型文件。")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("加载器")]),e._v(" "),a("ul",[a("li",[e._v("STL\n"),a("ul",[a("li",[e._v("STLLoader")])])]),e._v(" "),a("li",[e._v("obj与mtl\n"),a("ul",[a("li",[e._v("OBJLoader")]),e._v(" "),a("li",[e._v("MTLLoader")])])]),e._v(" "),a("li",[e._v("FBX\n"),a("ul",[a("li",[e._v("FBXLoader")])])]),e._v(" "),a("li",[e._v("Collada\n"),a("ul",[a("li",[e._v("ColladaLoader")])])]),e._v(" "),a("li",[e._v("PLY\n"),a("ul",[a("li",[e._v("PLYLoader")])])]),e._v(" "),a("li",[e._v("GLTF\n"),a("ul",[a("li",[e._v("GLTFLoader")])])])]),e._v(" "),a("h2",{attrs:{id:"three-js模型数据导入导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#three-js模型数据导入导出"}},[e._v("#")]),e._v(" Three.js模型数据导入导出")])])]),e._v(" "),a("p",[e._v("导出几何体信息:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var geometry = new THREE.BoxGeometry(100, 100, 100);\n// 控制台查看立方体数据\nconsole.log(geometry);\n// 控制台查看geometry.toJSON()结果\nconsole.log(geometry.toJSON());\n// JSON对象转化为字符串\nconsole.log(JSON.stringify(geometry.toJSON()));\n// JSON.stringify()方法内部会自动调用参数的toJSON()方法\nconsole.log(JSON.stringify(geometry));\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("p",[e._v("导出材质信息:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var material = new THREE.MeshLambertMaterial({\n  color: 0x0000ff,\n}); //材质对象Material\nconsole.log(material);\nconsole.log(material.toJSON());\nconsole.log(JSON.stringify(material));\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("导出场景scene信息:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var mesh = new THREE.Mesh(geometry, material); //网格模型对象Mesh\nscene.add(mesh); //网格模型添加到场景中\nconsole.log(scene);\nconsole.log(scene.toJSON());\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"自定义模型加载器文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义模型加载器文件"}},[e._v("#")]),e._v(" 自定义模型加载器文件")]),e._v(" "),a("p",[e._v("实际开发中，加载一种特定格式的模型文件，Threejs在"),a("code",[e._v("three.js-master\\examples\\js\\loaders")]),e._v("目录下会提供一系列的加载器，这些加载器本质上都是解析模型文件的字符串，通过正则表达式提取相关的顶点、材质等信息转化为Threejs自身的类表示的对象。为了让大家更理解这些常见的加载器，课件中提供了一个源码案例，编写了一个非常非常简易的自定义加载器，然后使用自定义的加载器去加载一个文件，让大家明白这些加载器怎么来的。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 如果编写通用的材质加载器需要枚举所有的材质，这里没有列举完\nvar typeAPI = {\n  MeshLambertMaterial: THREE.MeshLambertMaterial,\n  MeshBasicMaterial: THREE.MeshBasicMaterial,\n  MeshPhongMaterial: THREE.MeshPhongMaterial,\n  PointsMaterial: THREE.PointsMaterial,\n}\n// 创建一个文件加载器，该加载器是对异步加载的封装\nvar loader = new THREE.FileLoader();\nloader.load('material.json', function(elem) {\n  console.log(elem);// 查看加载返回的内容\n  var obj = JSON.parse(elem);// 字符串转JSON对象\n  console.log(obj);// 查看转化结果\n  var geometry = new THREE.BoxGeometry(100, 100, 100);\n  /**\n   * 解析材质数据\n   */\n  // 根据type的值判断调用threejs的哪一个API\n  var material = new typeAPI[obj.type]();\n  // 从obj.color中提取颜色\n  // 16711935对应颜色0xFF00FF  255对应颜色0x0000FF\n  material.color.r = (obj.color >> 16 & 255) / 255; //获取颜色值R部分\n  material.color.g = (obj.color >> 8 & 255) / 255; //获取颜色值G部分\n  material.color.b = (obj.color & 255) / 255; //获取颜色值B部分\n\n  var mesh = new THREE.Mesh(geometry, material); //网格模型对象Mesh\n  scene.add(mesh); //网格模型添加到场景中\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br")])]),a("h3",{attrs:{id:"加载three-js导出的模型数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载three-js导出的模型数据"}},[e._v("#")]),e._v(" 加载Three.js导出的模型数据")]),e._v(" "),a("p",[e._v("缓冲几何体数据加载器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("/**\n *\n */\nvar loader = new THREE.BufferGeometryLoader();\nloader.load('bufferGeometry.json',function (geometry) {\n  // 控制台查看加载放回的threejs对象结构\n  console.log(geometry);\n  var material = new THREE.MeshLambertMaterial({\n    color: 0x0000ff,\n  }); //材质对象Material\n  var mesh = new THREE.Mesh(geometry, material); //网格模型对象Mesh\n  scene.add(mesh); //网格模型添加到场景中\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("p",[e._v("网格模型Mesh加载，包含几何体Geometry和材质Material")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var loader = new THREE.ObjectLoader();\nloader.load('model.json',function (obj) {\n  console.log(obj);\nconsole.log(obj.type);\n  obj.scale.set(100,100,100)\n  scene.add(obj)\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("加载组Group对象，模型对象构成的树结构")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("loader.load('group.json', function(obj) {\n  console.log(obj);\n  console.log(obj.type);\n  scene.add(obj)\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("加载场景对象，场景对象不仅包含模型，还包括光源对象")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("loader.load('scene.json',function (obj) {\n  console.log(obj);\n  console.log(obj.type);\n  obj.scale.set(100,100,100)\n  scene.add(obj)\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h3",{attrs:{id:"加载-obj模型文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载-obj模型文件"}},[e._v("#")]),e._v(" 加载.obj模型文件")]),e._v(" "),a("p",[e._v("使用三维软件导出"),a("code",[e._v(".obj")]),e._v("模型文件的时候，会同时导出一个材质文件"),a("code",[e._v(".mtl")]),e._v("， "),a("code",[e._v(".obj")]),e._v("和"),a("code",[e._v(".stl")]),e._v("文件包含的信息一样都是几何体顶点相关数据，材质文件"),a("code",[e._v(".mtl")]),e._v("包含的是模型的材质信息，比如颜色、贴图路径等。")]),e._v(" "),a("p",[e._v("加载"),a("code",[e._v(".obj")]),e._v("三维模型的时候，可以只加载"),a("code",[e._v(".obj")]),e._v("文件，然后借助three.js引擎自定义材质"),a("a",{attrs:{href:"http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/materials/Material",target:"_blank",rel:"noopener noreferrer"}},[e._v("Material"),a("OutboundLink")],1),e._v("，也可以同时加载"),a("code",[e._v(".obj")]),e._v("和"),a("code",[e._v(".mtl")]),e._v("文件。")]),e._v(" "),a("h4",{attrs:{id:"只加载obj文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只加载obj文件"}},[e._v("#")]),e._v(" 只加载obj文件")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\x3c!-- 引入obj模型加载库OBJLoader.js --\x3e\n<script src=\"../../three.js-master/examples/js/loaders/OBJLoader.js\"><\/script>\n/**\n * OBJ文件加载  只加载obj文件中的几何信息，不加载材质文件.mtl\n */\nvar loader = new THREE.OBJLoader();\n// 没有材质文件，系统自动设置Phong网格材质\nloader.load('./立方体/box.obj',function (obj) {\n  // 控制台查看返回结构：包含一个网格模型Mesh的组Group\n  console.log(obj);\n  // 查看加载器生成的材质对象：MeshPhongMaterial\n  console.log(obj.children[0].material);\n  scene.add(obj);\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("p",[e._v("加载文件返回的对象插入场景中后，你也可以做一些自定的设置，比如缩放、居中等操作。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 加载后的一些编辑操作\nobj.children[0].scale.set(20,20,20);//网格模型缩放\nobj.children[0].geometry.center();//网格模型的几何体居中\nobj.children[0].material.color.set(0xff0000);//设置材质颜色\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h4",{attrs:{id:"同时加载obj文件和mtl文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同时加载obj文件和mtl文件"}},[e._v("#")]),e._v(" 同时加载obj文件和mtl文件")]),e._v(" "),a("p",[a("code",[e._v("mtl")]),e._v("文件包含了模型的材质信息，比如模型颜色、透明度等信息，还有纹理贴图的路径，比如颜色贴图、法线贴图、高光贴图等等。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\x3c!-- 引入obj模型加载库OBJLoader.js --\x3e\n<script src=\"../../three.js-master/examples/js/loaders/OBJLoader.js\"><\/script>\n\x3c!-- 引入obj模型材质加载库MTLLoader.js --\x3e\n<script src=\"../../three.js-master/examples/js/loaders/MTLLoader.js\"><\/script>\n\n/**\n * OBJ和材质文件mtl加载\n */\nvar OBJLoader = new THREE.OBJLoader();//obj加载器\nvar MTLLoader = new THREE.MTLLoader();//材质文件加载器\nMTLLoader.load('./立方体/box.mtl', function(materials) {\n  // 返回一个包含材质的对象MaterialCreator\n  console.log(materials);\n  //obj的模型会和MaterialCreator包含的材质对应起来\n  OBJLoader.setMaterials(materials);\n  OBJLoader.load('./立方体/box.obj', function(obj) {\n    console.log(obj);\n    obj.scale.set(10, 10, 10); //放大obj组对象\n    scene.add(obj);//返回的组对象插入场景中\n  })\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br")])]),a("h4",{attrs:{id:"导出-obj和-mtl的名称、路径问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导出-obj和-mtl的名称、路径问题"}},[e._v("#")]),e._v(" 导出"),a("code",[e._v(".obj")]),e._v("和"),a("code",[e._v(".mtl")]),e._v("的名称、路径问题")]),e._v(" "),a("p",[e._v("3dmax导出的obj和mtl模型文件有时候需要修改一下个别位置字符，比如"),a("code",[e._v(".obj")]),e._v("中"),a("code",[e._v(".mtl")]),e._v("文件的名称可能是乱码"),a("code",[e._v("mtllib �����.mtl")]),e._v("，"),a("code",[e._v(".mtl")]),e._v("文件中贴图的路径要设置正确，比如导出的是绝对路径还是相对路径，可以打开看下。")]),e._v(" "),a("h4",{attrs:{id:"obj文件不包含信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#obj文件不包含信息"}},[e._v("#")]),e._v(" "),a("code",[e._v(".obj")]),e._v("文件不包含信息")]),e._v(" "),a("p",[a("code",[e._v(".obj")]),e._v("文件不包含场景的相机"),a("a",{attrs:{href:"http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/cameras/Camera",target:"_blank",rel:"noopener noreferrer"}},[e._v("Camera"),a("OutboundLink")],1),e._v("、光源"),a("a",{attrs:{href:"http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/lights/Light",target:"_blank",rel:"noopener noreferrer"}},[e._v("Light"),a("OutboundLink")],1),e._v("等信息，不能导出骨骼动画、变形动画，如果希望导出光照信息、相机信息、骨骼动画信息、变形动画信息，可以选择"),a("code",[e._v(".fbx")]),e._v("、"),a("code",[e._v(".gltf")]),e._v("等格式。")]),e._v(" "),a("h3",{attrs:{id:"three-js全屏-局部渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#three-js全屏-局部渲染"}},[e._v("#")]),e._v(" Three.js全屏/局部渲染")]),e._v(" "),a("p",[e._v("通过Three.js发开Web3D应用的时候，渲染窗口可能是全屏效果占满web页面整个body区域，也可能是web页面上一个特定位置特定区域，比如渲染区域是一个特定位置、特定宽高的div元素所在区域。")]),e._v(" "),a("h4",{attrs:{id:"全屏渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全屏渲染"}},[e._v("#")]),e._v(" 全屏渲染")]),e._v(" "),a("p",[e._v("直接通过Three.js的WebGL渲染器"),a("a",{attrs:{href:"http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/renderers/WebGLRenderer",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebGLRenderer"),a("OutboundLink")],1),e._v("的"),a("code",[e._v(".setSize()")]),e._v("方法设置渲染尺寸为浏览器body区域宽高度。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var width = window.innerWidth; //浏览器窗口宽度\nvar height = window.innerHeight; //浏览器窗口高度\n// 相机参数设置\nvar k = width / height;\nvar s = 150;\n//正投影相机设置\nvar camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);\n//透视投影相机设置\n// var camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\n//设置渲染区域尺寸\nrenderer.setSize(width, height);\n// body元素中插入Threejs渲染结果：canvas对象\ndocument.body.appendChild(renderer.domElement);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br")])]),a("h4",{attrs:{id:"局部渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#局部渲染"}},[e._v("#")]),e._v(" 局部渲染")]),e._v(" "),a("p",[e._v("下面代码实现的功能是Threejs渲染区域尺寸是300x300px，渲染结果"),a("code",[e._v(".domElement")]),e._v("(Canvas元素)插入到一个div元素中。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\x3c!-- 把Three.js渲染结果一个canvas元素插入到div中 --\x3e\n<div id=\"pos\"></div>\n\n<script>\n// 注意相机参数设置\nvar width = 300; //窗口宽度\nvar height = 300; //窗口高度\nvar k = width / height; //窗口宽高比\nvar s = 150; //三维场景显示范围控制系数，系数越大，显示的范围越大\n//正投影相机设置\nvar camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);\n//透视投影相机设置\n// var camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000);\n...\nvar renderer = new THREE.WebGLRenderer();\n// 设置渲染区域尺寸，本质就是设置输出canvas的尺寸\nrenderer.setSize(300, 300);\n// 把渲染器的渲染结果canvas对象插入到'pos'对应的div元素中\ndocument.getElementById('pos').appendChild(renderer.domElement);\n\n<\/script>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br")])]),a("p",[e._v("可以通过渲染结果"),a("code",[e._v(".domElement")]),e._v("(Canvas元素)的父元素div来控制渲染区域在浏览器上的位置。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('\x3c!-- 控制div位置 绝对定位  距离上方100px  距离左侧30px --\x3e\n<div id="pos" style="position: absolute;left: 30px;top: 100px;"></div>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"domelement属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domelement属性"}},[e._v("#")]),e._v(" "),a("code",[e._v(".domElement")]),e._v("属性")]),e._v(" "),a("p",[e._v("Three.js渲染器"),a("code",[e._v("WebGLRenderer")]),e._v("的"),a("code",[e._v(".domElement")]),e._v("属性是Three.js执行渲染方法"),a("code",[e._v(".render()")]),e._v("的渲染结果，本质上就是一个HTML元素Canvas，如果你对WebGL稍微有些了解的话，更容易理解"),a("code",[e._v(".domElement")]),e._v("属性，如果通过原生WebGL渲染一个场景，需要手动创建一个Cnavas画布获得WebGL上下文，如果使用Three.js框架，Threejs系统会自动创建一个canvas对象，然后把渲染结果呈现在该Canvas画布上。")]),e._v(" "),a("p",[a("code",[e._v(".domElement")]),e._v("属性值是一个HTML元素canvas，那么如何使用 "),a("code",[e._v(".domElement")]),e._v("属性，就变成前端问题，你可以把"),a("code",[e._v(".domElement")]),e._v("表示的canvas画布插入到Web页面中任何一个HTML元素中。")]),e._v(" "),a("h4",{attrs:{id:"setsize-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setsize-方法"}},[e._v("#")]),e._v(" "),a("code",[e._v(".setSize()")]),e._v("方法")]),e._v(" "),a("p",[e._v("Threejs渲染器的"),a("code",[e._v(".setSize()")]),e._v("方法简单解释就是设置渲染结果的尺寸范围，本质上就是设置"),a("code",[e._v(".domElement")]),e._v("表示的canvas画布的宽高尺寸。")]),e._v(" "),a("h4",{attrs:{id:"相机控件orbitcontrols作用范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相机控件orbitcontrols作用范围"}},[e._v("#")]),e._v(" 相机控件"),a("code",[e._v("OrbitControls")]),e._v("作用范围")]),e._v(" "),a("p",[e._v("如果渲染区域变化了，不仅仅要改变WebGL渲染器相关参数，如果使用的其它扩展库与Threejs渲染范围有关，比如"),a("code",[e._v("OrbitControls.js")]),e._v("，，也需要设置该控件的鼠标作用范围。通过"),a("code",[e._v("OrbitControls")]),e._v("创建一个相机控件对象的时候，默认情况下，在浏览器的窗口整个内容区域body发生鼠标事件都会旋转、平移或缩放三维场景，如果局部渲染，注意设置构造函数"),a("code",[e._v("THREE.OrbitControls")]),e._v("的参数2。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 局部渲染设置OrbitControls空间作用范围\nvar controls = new THREE.OrbitControls(camera, renderer.domElement);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);