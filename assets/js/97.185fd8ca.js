(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{703:function(e,s,r){"use strict";r.r(s);var t=r(7),a=Object(t.a)({},(function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[e._v("#")]),e._v(" 场景")]),e._v(" "),r("p",[e._v("使用 homebrew 安装 nginx")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("brew install nginx\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("p",[e._v("报错:")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('==> Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/openssl%401.1-1.1.1k.mojave.bottle.tar.gz\n######################################################################## 100.0%\n==> Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/pcre-8.44.mojave.bottle.tar.gz\n######################################################################## 100.0%\n==> Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/nginx-1.19.9.mojave.bottle.tar.gz\n\ncurl: (22) The requested URL returned error: 404 \nTrying a mirror...\n==> Downloading https://ghcr.io/v2/homebrew/core/bottles/nginx-1.19.9.mojave.bottle.tar.gz\n==> Downloading from https://github.com/-/v2/packages/container/package/homebrew%2Fcore%2Fbottles%2Fnginx-1.19.9.mojave.bottle.tar.gz\nWarning: Transient problem: timeout Will retry in 1 seconds. 3 retries left.\nWarning: Transient problem: timeout Will retry in 2 seconds. 2 retries left.\nWarning: Transient problem: timeout Will retry in 4 seconds. 1 retries left.\n\ncurl: (28) Connection timed out after 15002 milliseconds\nError: Failed to download resource "nginx"\nDownload failed: https://ghcr.io/v2/homebrew/core/bottles/nginx-1.19.9.mojave.bottle.tar.gz\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br"),r("span",{staticClass:"line-number"},[e._v("14")]),r("br"),r("span",{staticClass:"line-number"},[e._v("15")]),r("br"),r("span",{staticClass:"line-number"},[e._v("16")]),r("br"),r("span",{staticClass:"line-number"},[e._v("17")]),r("br")])]),r("h2",{attrs:{id:"原因分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#原因分析"}},[e._v("#")]),e._v(" 原因分析")]),e._v(" "),r("p",[e._v("是因为网络的原因导致的，即homebrew的下载源是外网的，因此下载速度很慢或者会导致下载失败。")]),e._v(" "),r("h2",{attrs:{id:"解决办法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[e._v("#")]),e._v(" 解决办法")]),e._v(" "),r("p",[e._v("可能所有的mac用户都遇到过下面这种操蛋情况，在网络环境不太好的时候，你满怀期望的敲下 brew install 应用名称，静静的等待安装结果时，Homebrew 在 Updating 的地方卡死了，真是令人沮丧，当然了，这不是Homebrew的错，Homebrew 是一款 Mac OS 平台下的软件包管理工具，拥有安装、卸载、更新、查看、搜索等很多实用的功能。简单的一条指令，就可以实现包管理，而不用你关心各种依赖和文件路径的情况，十分方便快捷。")]),e._v(" "),r("p",[e._v("Homebrew 主要分两部分：git repo（位于 GitHub）和二进制 bottles，这两个网站在国内访问起来都慢的可以。接下来操作一下如何使用阿里云来加速这两部分的下载。")]),e._v(" "),r("p",[e._v("我们可以考虑使用 阿里云 的 Homebrew 镜像源进行加速。"),r("br"),e._v("\n假设你没有更换过镜像源，执行 brew 命令安装应用的时候，下面3 个仓库地址将影响你的下载速度："),r("br"),e._v("\nbrew.git"),r("br"),e._v("\nhomebrew-core.git"),r("br"),e._v("\nhomebrew-bottles")]),e._v(" "),r("h3",{attrs:{id:"首先-更换-brew-git"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#首先-更换-brew-git"}},[e._v("#")]),e._v(" 首先，更换 brew.git")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('cd "$(brew --repo)"\ngit remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("h3",{attrs:{id:"然后更换-homebrew-core-git"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#然后更换-homebrew-core-git"}},[e._v("#")]),e._v(" 然后更换 homebrew-core.git")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"\ngit remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("h3",{attrs:{id:"运行brew-config-来检查一下地址是否更新成功"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#运行brew-config-来检查一下地址是否更新成功"}},[e._v("#")]),e._v(" 运行brew config 来检查一下地址是否更新成功")]),e._v(" "),r("p",[r("code",[e._v("brew config")])]),e._v(" "),r("h3",{attrs:{id:"最后一步-更换-homebrew-bottles"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#最后一步-更换-homebrew-bottles"}},[e._v("#")]),e._v(" 最后一步：更换 homebrew-bottles")]),e._v(" "),r("p",[e._v("首先查看一下你的系统当前shell版本\n"),r("code",[e._v("echo $SHELL")]),e._v("\n根据版本不同，会输出 2 种结果，/bin/zsh 或 /bin/bash，根据不同类型运行不同的命令")]),e._v(" "),r("p",[e._v("/bin/zsh")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' >> ~/.zshrc\nsource ~/.zshrc\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("/bin/bash")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles' >> ~/.bash_profile\nsource ~/.bash_profile\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("如果阿里云镜像挂了，可以执行下面的命令进行下载源的恢复")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('# 重置brew.git:\ncd "$(brew --repo)"\ngit remote set-url origin https://github.com/Homebrew/brew.git\n\n# 重置homebrew-core.git:\ncd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"\ngit remote set-url origin https://github.com/Homebrew/homebrew-core.git\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br")])]),r("p",[e._v("随后可以删掉 HOMEBREW_BOTTLE_DOMAIN 环境变量，将你终端文件 "),r("code",[e._v("~/.bash_profile")]),e._v(" 或者 "),r("code",[e._v("~/.zshrc")]),e._v(" 中的"),r("code",[e._v("HOMEBREW_BOTTLE_DOMAIN")]),e._v("这一行删掉，随后执行命令：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("source ~/.bash_profile\nsource ~/.zshrc\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])])])}),[],!1,null,null,null);s.default=a.exports}}]);